---
layout: post
categories: 공부 책 cs
---

## chapter3 운영체제
### 3-1 운영체제의 큰 그림

운영체제는 컴퓨터 시스템의 중요한 부분으로, 하드웨어와 소프트웨어 자원을 관리하고 사용자와 시스템 간의 상호작용을 돕습니다. 운영체제는 다음과 같은 주요 역할을 합니다:

1. **자원 할당 및 관리**: 
   - **자원 관리**: CPU, 메모리, 저장 장치, 입출력 장치 등 다양한 하드웨어 자원을 효율적으로 관리합니다.
   - **파일 시스템 관리**: 데이터를 저장하고 검색하기 위한 파일 시스템을 제공합니다.

2. **프로세스 및 스레드 관리**: 
   - **프로세스 관리**: 여러 프로세스를 동시에 실행하고 관리하며, 프로세스 간의 자원 할당을 조정합니다.

3. **보안**: 시스템 자원과 데이터를 보호하기 위한 보안 메커니즘을 제공합니다.

4. **사용자 인터페이스**: 사용자와 시스템 간의 상호작용을 위한 인터페이스를 제공합니다.

#### 자원 할당 및 관리

자원(resource)이란 컴퓨터 프로그램이 실행되는 데 필요한 모든 요소를 의미합니다. 대표적으로 CPU, 메모리, 보조기억장치(디스크), 그리고 네트워크 자원 등이 있습니다. 운영체제는 이러한 자원들이 효율적으로 사용되도록 관리합니다.

- **CPU 관리:** CPU는 컴퓨터 시스템의 중앙 처리 장치로, 여러 프로그램이 동시에 실행될 수 있도록 스케줄링합니다.
- **메모리 관리:** 메모리는 실행 중인 프로그램과 데이터를 저장하는 공간입니다. 운영체제는 메모리를 효율적으로 관리하여 프로그램들이 원활하게 실행될 수 있도록 합니다.
- **파일 시스템 관리:** 파일 시스템은 데이터를 저장하고 검색하는 방법을 정의합니다. 운영체제는 파일 시스템을 통해 데이터를 체계적으로 관리합니다.

#### 프로세스 및 스레드 관리

프로세스(process)는 실행 중인 프로그램을 의미하며, 스레드(thread)는 프로세스 내에서 실행되는 작은 작업 단위입니다. 운영체제는 프로세스와 스레드의 생성, 스케줄링, 동기화, 그리고 종료를 관리합니다.

- **프로세스 관리:** 여러 프로세스가 동시에 실행될 수 있도록 스케줄링하고, 각 프로세스가 필요한 자원을 할당받을 수 있도록 관리합니다.
- **스레드 관리:** 한 프로세스 내에서 여러 스레드가 동시에 실행될 수 있도록 지원하며, 스레드 간의 동기화와 자원 공유를 관리합니다.

### 커널과 시스템 콜

운영체제의 핵심 부분은 **커널**(kernel)입니다. 커널은 자원 관리와 프로세스 관리를 담당하며, 하드웨어와 직접 상호작용합니다. 사용자는 **시스템 콜**(system call)을 통해 커널의 기능을 사용할 수 있습니다. 시스템 콜은 운영체제의 서비스를 요청하는 인터페이스로, 파일 읽기/쓰기, 프로세스 생성/종료, 메모리 할당/해제 등의 작업을 수행합니다.

### 시스템 콜과 이중 모드

운영체제는 사용자 프로그램과 하드웨어 간의 인터페이스를 제공하기 위해 시스템 콜을 사용합니다. 예를 들어, 파일을 읽거나 쓰는 작업, 프로세스를 생성하거나 종료하는 작업 등이 있습니다.

운영체제는 두 가지 모드로 운영됩니다:
1. **커널 모드**(Kernel Mode): 운영체제가 직접 하드웨어 자원에 접근할 수 있는 모드로, 시스템 콜을 처리하고 중요한 작업을 수행합니다.
2. **사용자 모드**(User Mode): 일반 애플리케이션이 실행되는 모드로, 직접 하드웨어 자원에 접근할 수 없으며 운영체제를 통해서만 접근할 수 있습니다.

이 두 가지 모드는 시스템의 안정성과 보안을 유지하기 위해 중요합니다. 사용자 모드에서 실행되는 프로그램이 직접 하드웨어에 접근할 수 없기 때문에, 잘못된 동작으로 인해 시스템 전체에 문제가 발생하지 않도록 합니다.

### 퀴즈

1. 운영체제의 주요 역할 중 하나가 아닌 것은 무엇인가요?
   1) 자원 관리
   2) 프로세스 관리
   3) 네트워크 관리
   4) 파일 시스템 관리

2. 시스템 콜은 무엇을 의미하나요?
   1) 운영체제가 사용자 프로그램의 요청을 처리하는 방법
   2) 하드웨어가 운영체제에 명령을 보내는 방법
   3) 사용자 프로그램이 직접 하드웨어 자원에 접근하는 방법
   4) 운영체제가 네트워크를 통해 다른 시스템과 통신하는 방법

3. 운영체제의 두 가지 모드 중, 일반 애플리케이션이 실행되는 모드는 무엇인가요?
   1) 커널 모드
   2) 사용자 모드
   3) 관리자 모드
   4) 디바이스 모드

4. 사용자 모드에서 실행되는 프로그램이 하드웨어 자원에 접근할 수 있는 방법은 무엇인가요?
   1) 직접 접근
   2) 시스템 콜을 통해 접근
   3) 운영체제의 허락 없이 접근
   4) 하드웨어 모드에서 접근

<details>
   <summary>답</summary>

   3, 1, 2, 2
</details>

--- 

### 3-2 프로세스와 스레드 

#### 프로세스
- **정의**: 실행 중인 프로그램.
- **구성 요소**: 코드, 데이터, 힙, 스택.
  - **코드**: 실행 가능한 명령어가 저장된 공간. 읽기 전용. 
  - **데이터**: 초기화된 전역 변수와 정적 변수가 저장된 공간. 정적 할당 영역. 
  - **힙**: 동적으로 할당된 메모리가 저장되는 공간.
  - **스택**: 함수 호출과 관련된 지역 변수와 매개 변수가 저장되는 공간.

#### 스레드
- **정의**: 프로세스 내에서 실행의 단위.
- **구성 요소**: 스레드 ID, 프로그램 카운터, 레지스터, 스택.
  - **스레드 ID**: 스레드를 식별하는 고유 정보.
  - **프로그램 카운터**: 다음 실행 명령어 주소를 저장.
  - **레지스터**: 연산 과정에서 사용되는 임시 저장 공간.
  - **스택**: 함수 호출 관련 데이터를 저장.

#### 프로세스 제어 블록(PCB)
- **정의**: PCB는 프로세스의 상태, CPU 레지스터, 메모리 정보 등을 저장하여 운영체제가 프로세스를 관리하고 문맥 교환 시 필요한 정보를 제공합니다.

#### PCB 역할
- **문맥 교환(Context Switching)**: CPU가 다른 프로세스로 전환될 때 현재 프로세스의 상태를 PCB에 저장하고, 다음 프로세스의 상태를 PCB에서 복원.

#### 멀티프로세스와 멀티스레드
- **멀티프로세스**: 여러 프로세스를 동시에 실행하는 방식. 독립된 메모리 공간 사용.
- **멀티스레드**: 하나의 프로세스 내에서 여러 스레드를 동시에 실행하는 방식. 동일한 메모리 공간 공유.

#### 주요 차이점
- **자원 공유**: 멀티프로세스는 자원 공유 안함, 멀티스레드는 자원 공유.
- **오류 영향 범위**: 멀티프로세스는 오류 영향 없음, 멀티스레드는 오류가 전체에 영향.

#### 원격 프로시저 호출(RPC)
- **정의**: RPC는 원격 코드를 실행하는 기술로, 한 프로세스에서 다른 프로세스의 코드를 실행하는 방식입니다.
- **기능**: 
  - **성능 저하 최소화**: RPC는 프로그래밍 언어나 플랫폼에 무관하게 성능 저하를 최소화하며 메시지 송수신이 가능합니다.
  - **대규모 트래픽 처리**: 특히 서버 간 통신 환경에서 자주 사용됩니다.

#### RPC의 특징
- **프로세스 간 통신(IPC)**: RPC는 네트워크 소켓을 통해 IPC를 수행할 수 있습니다.
- **메시지 전달**: 프로세스 간에 주고받는 데이터가 커널을 거쳐 송수신됩니다. 이는 공유 메모리 기반 IPC보다 상대적으로 레이스 컨디션이나 동기화 문제를 덜 고려하게 합니다.
- **구현 프레임워크**: 오늘날 가장 대중적으로 사용되는 RPC 프레임워크는 구글의 gRPC입니다.

### 문제

1. **프로세스와 스레드의 차이점을 설명하시오.**
   <details>
      <summary>답</summary>

       프로세스는 실행 중인 프로그램으로 독립적인 메모리 공간을 가지며, 스레드는 프로세스 내에서 실행의 단위로 동일한 메모리 공간을 공유합니다.
   </details>

2. **멀티프로세스와 멀티스레드의 주요 차이점을 설명하시오.**
   <details>
      <summary>답</summary>
      
      멀티프로세스는 독립적인 메모리 공간을 사용하여 자원을 공유하지 않지만, 멀티스레드는 동일한 주소 공간을 공유하여 자원을 공유합니다. 또한, 멀티프로세스는 한 프로세스의 오류가 다른 프로세스에 영향을 주지 않지만, 멀티스레드는 한 스레드의 오류가 전체 프로세스에 영향을 줄 수 있습니다.
   </details>
