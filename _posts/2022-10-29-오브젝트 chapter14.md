---
layout: post
categories: 공부 
---

# 일관성 있는 협력

객체지향 설계의 목표는 적절한 책임을 수행하는 객체들의 협력을 기반으로 결합도가 낮고 재사용 가능한 코드 구조를 창조하는 것이다. 

객체지향 패러다임의 장점은 설계를 재사용할 수 있다는 것이다. 재사용을 위해서는 객체들의 협력 방식을 일관성 있게 만들어야 한다. 일관성은 설계에 드는 비용을 감소시킨다. 일관성 있는 설꼐가 가져다 주는 더 큰 이익은 코드가 이해하기 쉬워진다는 것이다. 

가능하면 유사한 기능을 구현하기 위해 유사한 협력 패턴을 사용하라. 

## 설계에 일관성 부여하기 

일관성 있는 설계를 만드는 데 가장 훌륭한 방법은 다양한 설계 경험을 익히는 것이다. 설계 경험이 풍부할수록 어떤 위치에서 일관성을 보장해야하고 일관성을 제고하기 위해 어떤 방법을 사용해야 하는지 직관적으로 결정할 수 있다. 

두번째 방법은 널리 알려진 디자인 패턴을 학습하고 변경이라는 문맥 안에서 디자인 패턴을 적용해 보는 것이다. 

협력을 일관성 있게 만들기 위해서는 **변하는 개념을 변하지 않는 개념으로부터 분리**, **변하는 개념을 캡슐화**하는 것이 기본 원칙이다. 

> 바뀌는 부분을 따로 뽑아서 캡슐화한다. 그렇게 하면 나중에 바뀌지 않는 부분에는 영향을 미치지 않은 채로 그 부분만 고치거나 확장할 수 있다. 

클래스를 분리하기 위한 가장 중요한 기준은 변경의 이유와 주기다. 클래스는 명확히 단 하나의 이유에 의해서만 변경돼야 하고 클래스 안의 모든 코드는 함께 변경돼야 한다. **단일 책임 원칙**을 따르도록 클래스를 분리해야 한다. 

#### 일관성 있는 협력을 위한 지침 
1. 변하는 개념을 변하지 않는 개념으로부터 분리하라.
2. 변하는 개념을 캡슐화하라. 

핵심은 훌륭한 추상화를 찾아 추상화에 의존하도록 만드는 것이다. 추상화에 대한 의존은 결합도를 낮추고 결과적으로 대체 가능한 역할로 구성된 협력을 설계할 수 있게 해준다. 추상화의 품질이 캡슐화의 품질을 결정한다. 

### 캡슐화 다시 살펴보기 

> 캡슐화란 변하는 어떤 것이든 감추는 것이다.

캡슐화의 가장 대표적인 예는 객체의 퍼블릭 인터페이스와 구현을 분리하는 것이다. 

- 데이터 캡슐화: 내부에 관리하는 데이터를 캡슐화
